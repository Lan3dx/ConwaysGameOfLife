from threading import Thread
from settings import *
from os import system
from time import sleep
from inspect import stack
from random import randint
import calculate
import render

class Main(Thread):

    def run(self):
        
        system("mode "+str(WIDTH)+","+str(HEIGHT+1))
        board = BOARD

        shape1   = [[" "," ","@"," "," "," "],
                 [" "," "," ","@"," "," "],
                 [" ","@","@","@"," "," "],
                 [" "," "," "," "," "," "],
                 [" "," "," "," "," "," "],
                 [" "," "," "," "," "," "]]

        shape1  = [[" "," "," "," "," "," "],
                  [" "," "," "," "," "," "],
                  [" ","@","@","@","@"," "],
                  ["@"," "," "," ","@"," "],
                  [" "," "," "," ","@"," "],
                  ["@"," "," ","@"," "," "],
                  [" "," "," "," "," "," "],
                  [" "," "," "," "," "," "]]

        shape = [[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," ","@","@","@"," ","@","@","@"," "," "," "," "],
                 [" "," "," "," "," ","@"," ","@"," ","@"," ","@"," "," "," "," "],
                 [" "," "," "," "," ","@","@","@"," ","@"," ","@"," "," "," "," "],
                 [" "," "," "," "," "," "," ","@"," ","@"," ","@"," "," "," "," "],
                 [" "," "," "," "," ","@","@","@"," ","@","@","@"," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
                 [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "]]



        for i in range(len(shape)):
            for j in range(len(shape[i])):
                board[i+20][j+40] = shape[i][j]

        while True:

            try:

                render.out(board)
                board = calculate.get(board)

            except Exception as e:

                print("Ошибка в "+ str(stack()[0][3]) +". Код ошибки:", e)

            finally:

                sleep(1/SPEED)
            

